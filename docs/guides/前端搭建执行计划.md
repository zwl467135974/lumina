# Lumina 前端搭建执行计划

## 一、执行计划概述

### 1.1 目标
搭建 Lumina 前端项目的基础架构，包括：
- 项目初始化和依赖安装
- 项目结构搭建
- 核心功能开发（请求封装、路由、状态管理）
- 布局组件开发
- 开发工具配置
- 开发环境验证

### 1.2 执行原则
1. **分阶段执行** - 按功能模块逐步搭建
2. **先核心后业务** - 先搭建核心功能，再开发业务页面
3. **验证驱动** - 每个阶段完成后进行验证
4. **文档同步** - 关键步骤记录在文档中

### 1.3 预计工作量
- **阶段一（项目初始化）**: 1-2 小时
- **阶段二（项目结构）**: 1-2 小时
- **阶段三（核心功能）**: 3-4 小时
- **阶段四（布局组件）**: 2-3 小时
- **阶段五（开发工具）**: 1 小时
- **阶段六（验证测试）**: 1 小时
- **总计**: 9-13 小时

---

## 二、阶段一：项目初始化

### 2.1 任务清单

| 任务编号 | 任务名称 | 优先级 | 预计时间 |
|---------|---------|--------|---------|
| T1.1 | 创建项目 | P0 | 10分钟 |
| T1.2 | 安装核心依赖 | P0 | 20分钟 |
| T1.3 | 安装开发依赖 | P0 | 10分钟 |
| T1.4 | 配置基础文件 | P0 | 20分钟 |

### 2.2 详细执行步骤

#### T1.1 创建项目

**目标**: 使用 Vite 创建 Vue 3 + TypeScript 项目

**步骤**:
1. 在 `workHub` 目录下执行：
   ```bash
   pnpm create vite lumina-frontend --template vue-ts
   ```

2. 进入项目目录：
   ```bash
   cd lumina-frontend
   ```

**验证点**:
- [ ] 项目目录已创建
- [ ] 基础文件已生成（package.json、vite.config.ts 等）

**注意事项**:
- 确保 Node.js 版本 >= 18.0
- 推荐使用 pnpm，如使用 npm 或 yarn，后续命令需相应调整

---

#### T1.2 安装核心依赖

**目标**: 安装项目运行所需的核心依赖

**步骤**:
1. 安装 Vue 生态核心依赖：
   ```bash
   pnpm add vue@^3.4 vue-router@^4.2 pinia@^2.1
   ```

2. 安装 UI 组件库：
   ```bash
   pnpm add element-plus@^2.5 @element-plus/icons-vue@^2.3
   ```

3. 安装 HTTP 客户端：
   ```bash
   pnpm add axios@^1.6
   ```

4. 安装工具库：
   ```bash
   pnpm add dayjs@^1.11 nprogress@^0.2
   ```

**验证点**:
- [ ] 所有依赖已安装
- [ ] package.json 中依赖版本正确
- [ ] 无依赖冲突

**注意事项**:
- 注意版本号，使用 `^` 允许小版本更新
- 检查是否有依赖冲突警告

---

#### T1.3 安装开发依赖

**目标**: 安装开发工具和构建工具

**步骤**:
1. 安装 Vite 插件：
   ```bash
   pnpm add -D @vitejs/plugin-vue
   ```

2. 安装样式预处理器：
   ```bash
   pnpm add -D sass@^1.69
   ```

3. 安装代码质量工具：
   ```bash
   pnpm add -D eslint@^8.57 prettier@^3.2 stylelint@^16.0
   ```

4. 安装类型定义：
   ```bash
   pnpm add -D @types/node @types/nprogress
   ```

**验证点**:
- [ ] 所有开发依赖已安装
- [ ] 可以正常运行 `pnpm dev`

**注意事项**:
- 开发依赖使用 `-D` 标志
- 确保 Vite 配置正确

---

#### T1.4 配置基础文件

**目标**: 配置项目基础文件（package.json、vite.config.ts、tsconfig.json）

**步骤**:
1. **配置 package.json**:
   - 添加项目信息
   - 配置 scripts（dev、build、lint、format）
   - 配置依赖版本

2. **配置 vite.config.ts**:
   - 配置路径别名（`@` -> `src`）
   - 配置开发服务器代理
   - 配置构建选项

3. **配置 tsconfig.json**:
   - 配置 TypeScript 编译选项
   - 配置路径别名
   - 配置严格模式

4. **创建环境变量文件**:
   - `.env.development` - 开发环境变量
   - `.env.production` - 生产环境变量

**验证点**:
- [ ] 配置文件语法正确
- [ ] 路径别名生效
- [ ] 环境变量可以正常读取

**注意事项**:
- 参考 `前端架构设计.md` 中的配置文件示例
- 确保路径别名配置正确

---

## 三、阶段二：项目结构搭建

### 3.1 任务清单

| 任务编号 | 任务名称 | 优先级 | 预计时间 |
|---------|---------|--------|---------|
| T2.1 | 创建目录结构 | P0 | 20分钟 |
| T2.2 | 创建核心入口文件 | P0 | 30分钟 |
| T2.3 | 创建类型定义文件 | P0 | 20分钟 |

### 3.2 详细执行步骤

#### T2.1 创建目录结构

**目标**: 按照架构设计创建完整的目录结构

**步骤**:
1. 创建主要目录：
   ```bash
   mkdir -p src/api/modules
   mkdir -p src/assets/{images,icons,styles}
   mkdir -p src/components/{common,business}
   mkdir -p src/composables
   mkdir -p src/directives
   mkdir -p src/layouts/components
   mkdir -p src/router/modules
   mkdir -p src/stores/modules
   mkdir -p src/types
   mkdir -p src/utils
   mkdir -p src/views/{agent,user,system,login}
   ```

2. 创建公共资源目录：
   ```bash
   mkdir -p public
   ```

**验证点**:
- [ ] 所有目录已创建
- [ ] 目录结构符合架构设计

**注意事项**:
- 参考 `前端架构设计.md` 中的目录结构
- 确保目录命名正确

---

#### T2.2 创建核心入口文件

**目标**: 创建应用入口文件和根组件

**步骤**:
1. **创建 main.ts**:
   - 导入 Vue 和相关插件
   - 注册 Element Plus
   - 注册 Element Plus 图标
   - 挂载应用

2. **创建 App.vue**:
   - 基础根组件结构
   - 路由视图

3. **创建全局样式文件**:
   - `src/assets/styles/index.scss` - 全局样式入口
   - `src/assets/styles/variables.scss` - SCSS 变量
   - `src/assets/styles/mixins.scss` - SCSS 混入

**验证点**:
- [ ] 应用可以正常启动
- [ ] 无编译错误
- [ ] 样式文件可以正常导入

**注意事项**:
- 参考 `前端开发指南.md` 中的入口文件示例
- 确保 Element Plus 样式正确导入

---

#### T2.3 创建类型定义文件

**目标**: 创建 TypeScript 类型定义文件

**步骤**:
1. **创建 API 类型** (`src/types/api.ts`):
   - 统一响应类型 `R<T>`
   - 分页结果类型 `PageResult<T>`
   - 通用类型定义

2. **创建通用类型** (`src/types/common.ts`):
   - 通用工具类型
   - 常用类型别名

3. **创建路由类型** (`src/types/router.ts`):
   - 路由元信息类型
   - 路由配置类型

4. **创建环境变量类型** (`src/env.d.ts`):
   - Vite 环境变量类型
   - 全局类型声明

**验证点**:
- [ ] 类型定义正确
- [ ] 无 TypeScript 错误
- [ ] 类型可以正常使用

**注意事项**:
- 确保类型定义与后端接口规范一致
- 参考后端 `R<T>` 响应格式

---

## 四、阶段三：核心功能开发

### 4.1 任务清单

| 任务编号 | 任务名称 | 优先级 | 预计时间 |
|---------|---------|--------|---------|
| T3.1 | HTTP 请求封装 | P0 | 1小时 |
| T3.2 | 路由配置 | P0 | 1小时 |
| T3.3 | 状态管理 | P0 | 1小时 |
| T3.4 | 工具函数 | P0 | 30分钟 |
| T3.5 | 组合式函数 | P0 | 30分钟 |

### 4.2 详细执行步骤

#### T3.1 HTTP 请求封装

**目标**: 封装 Axios，实现统一请求和响应处理

**步骤**:
1. **创建 request.ts**:
   - 创建 Axios 实例
   - 配置请求拦截器（添加 Token）
   - 配置响应拦截器（统一错误处理）
   - 处理 401 自动跳转登录

2. **创建 API 类型** (`src/api/types.ts`):
   - 定义 API 响应类型
   - 定义请求配置类型

3. **创建示例 API** (`src/api/modules/agent.ts`):
   - 定义 Agent 相关 API
   - 定义请求和响应类型
   - 实现 API 方法

**验证点**:
- [ ] 请求拦截器正常工作
- [ ] 响应拦截器正常工作
- [ ] Token 自动添加
- [ ] 错误处理正确

**注意事项**:
- 参考 `前端架构设计.md` 中的 HTTP 请求封装示例
- 确保与后端接口规范一致

---

#### T3.2 路由配置

**目标**: 配置 Vue Router，实现路由管理和路由守卫

**步骤**:
1. **创建路由模块** (`src/router/modules/agent.ts`):
   - 定义 Agent 相关路由
   - 配置路由元信息

2. **创建路由入口** (`src/router/index.ts`):
   - 创建 Router 实例
   - 注册所有路由模块
   - 配置路由模式

3. **创建路由守卫** (`src/router/guards.ts`):
   - 前置守卫（认证检查、权限检查）
   - 后置守卫（页面标题、进度条）
   - 错误处理

4. **创建路由类型** (`src/router/types.ts`):
   - 路由元信息类型
   - 路由配置类型

**验证点**:
- [ ] 路由可以正常跳转
- [ ] 路由守卫正常工作
- [ ] 未登录自动跳转登录页
- [ ] 无权限访问被拦截

**注意事项**:
- 参考 `前端架构设计.md` 中的路由配置示例
- 确保路由守卫逻辑正确

---

#### T3.3 状态管理

**目标**: 配置 Pinia，实现全局状态管理

**步骤**:
1. **创建用户状态** (`src/stores/modules/user.ts`):
   - 定义用户状态（token、userInfo）
   - 实现登录、登出、获取用户信息方法

2. **创建应用状态** (`src/stores/modules/app.ts`):
   - 定义应用状态（侧边栏折叠、主题等）
   - 实现状态更新方法

3. **创建权限状态** (`src/stores/modules/permission.ts`)（可选）:
   - 定义权限状态
   - 实现权限检查方法

4. **创建 Store 入口** (`src/stores/index.ts`):
   - 导出所有 Store

**验证点**:
- [ ] Store 可以正常使用
- [ ] 状态可以正常更新
- [ ] 状态持久化（如需要）

**注意事项**:
- 参考 `前端架构设计.md` 中的状态管理示例
- 确保状态更新逻辑正确

---

#### T3.4 工具函数

**目标**: 创建常用工具函数

**步骤**:
1. **创建认证工具** (`src/utils/auth.ts`):
   - Token 存储和读取
   - Token 清除

2. **创建存储工具** (`src/utils/storage.ts`):
   - localStorage 封装
   - sessionStorage 封装

3. **创建格式化工具** (`src/utils/format.ts`):
   - 日期格式化
   - 文件大小格式化
   - 其他格式化函数

4. **创建校验工具** (`src/utils/validate.ts`):
   - 常用校验函数
   - 表单校验规则

5. **创建工具函数入口** (`src/utils/index.ts`):
   - 统一导出所有工具函数

**验证点**:
- [ ] 工具函数可以正常使用
- [ ] 工具函数类型正确
- [ ] 工具函数测试通过（如需要）

**注意事项**:
- 参考 `前端架构设计.md` 中的工具函数示例
- 确保工具函数通用性和可复用性

---

#### T3.5 组合式函数

**目标**: 创建可复用的组合式函数

**步骤**:
1. **创建表格组合式函数** (`src/composables/useTable.ts`):
   - 封装表格数据加载
   - 封装分页逻辑
   - 封装加载状态

2. **创建表单组合式函数** (`src/composables/useForm.ts`):
   - 封装表单验证
   - 封装表单提交
   - 封装表单重置

3. **创建分页组合式函数** (`src/composables/usePagination.ts`):
   - 封装分页逻辑
   - 封装分页事件处理

**验证点**:
- [ ] 组合式函数可以正常使用
- [ ] 组合式函数类型正确
- [ ] 组合式函数可以复用

**注意事项**:
- 参考 `前端架构设计.md` 中的组合式函数示例
- 确保组合式函数通用性和可复用性

---

## 五、阶段四：布局组件开发

### 5.1 任务清单

| 任务编号 | 任务名称 | 优先级 | 预计时间 |
|---------|---------|--------|---------|
| T4.1 | 默认布局组件 | P0 | 1小时 |
| T4.2 | 布局子组件 | P0 | 1.5小时 |
| T4.3 | 空白布局组件 | P1 | 30分钟 |

### 5.2 详细执行步骤

#### T4.1 默认布局组件

**目标**: 创建默认布局组件，包含头部、侧边栏、主内容区

**步骤**:
1. **创建 DefaultLayout.vue**:
   - 布局结构（头部、侧边栏、主内容区）
   - 响应式布局
   - 样式定义

2. **集成子组件**:
   - AppHeader
   - AppSidebar
   - AppBreadcrumb

**验证点**:
- [ ] 布局组件可以正常显示
- [ ] 响应式布局正常
- [ ] 样式正确

**注意事项**:
- 参考 `前端开发指南.md` 中的布局组件示例
- 确保布局响应式设计

---

#### T4.2 布局子组件

**目标**: 创建布局子组件（头部、侧边栏、面包屑）

**步骤**:
1. **创建 AppHeader.vue**:
   - 顶部导航栏
   - 用户信息
   - 退出登录

2. **创建 AppSidebar.vue**:
   - 侧边栏菜单
   - 菜单折叠
   - 路由高亮

3. **创建 AppBreadcrumb.vue**:
   - 面包屑导航
   - 动态生成面包屑

**验证点**:
- [ ] 所有子组件可以正常显示
- [ ] 功能正常（菜单跳转、折叠等）
- [ ] 样式正确

**注意事项**:
- 参考 `前端开发指南.md` 中的组件示例
- 确保组件功能完整

---

#### T4.3 空白布局组件

**目标**: 创建空白布局组件（用于登录页等）

**步骤**:
1. **创建 BlankLayout.vue**:
   - 空白布局结构
   - 样式定义

**验证点**:
- [ ] 空白布局可以正常显示
- [ ] 样式正确

**注意事项**:
- 用于不需要头部和侧边栏的页面

---

## 六、阶段五：开发工具配置

### 6.1 任务清单

| 任务编号 | 任务名称 | 优先级 | 预计时间 |
|---------|---------|--------|---------|
| T5.1 | ESLint 配置 | P1 | 20分钟 |
| T5.2 | Prettier 配置 | P1 | 10分钟 |
| T5.3 | Stylelint 配置 | P1 | 10分钟 |
| T5.4 | Git 配置 | P1 | 10分钟 |

### 6.2 详细执行步骤

#### T5.1 ESLint 配置

**目标**: 配置 ESLint 代码检查

**步骤**:
1. 安装 ESLint 插件：
   ```bash
   pnpm add -D eslint-plugin-vue @typescript-eslint/eslint-plugin @typescript-eslint/parser
   ```

2. 创建 `.eslintrc.cjs`:
   - 配置 Vue 3 规则
   - 配置 TypeScript 规则
   - 配置代码风格规则

3. 配置 package.json scripts:
   ```json
   "lint": "eslint src --ext .vue,.js,.ts --fix"
   ```

**验证点**:
- [ ] ESLint 可以正常运行
- [ ] 代码检查规则生效

---

#### T5.2 Prettier 配置

**目标**: 配置 Prettier 代码格式化

**步骤**:
1. 创建 `.prettierrc`:
   - 配置格式化规则
   - 配置缩进、引号等

2. 配置 package.json scripts:
   ```json
   "format": "prettier --write \"src/**/*.{vue,ts,js,scss}\""
   ```

**验证点**:
- [ ] Prettier 可以正常运行
- [ ] 代码格式化规则生效

---

#### T5.3 Stylelint 配置

**目标**: 配置 Stylelint CSS 代码检查

**步骤**:
1. 安装 Stylelint 插件：
   ```bash
   pnpm add -D stylelint-config-standard-scss
   ```

2. 创建 `.stylelintrc.cjs`:
   - 配置 SCSS 规则
   - 配置代码风格规则

3. 配置 package.json scripts:
   ```json
   "stylelint": "stylelint \"src/**/*.{vue,scss}\" --fix"
   ```

**验证点**:
- [ ] Stylelint 可以正常运行
- [ ] CSS 代码检查规则生效

---

#### T5.4 Git 配置

**目标**: 配置 Git 仓库和 .gitignore

**步骤**:
1. 初始化 Git 仓库：
   ```bash
   git init
   ```

2. 创建 `.gitignore`:
   - node_modules
   - dist
   - .env.local
   - 其他忽略文件

3. 创建 `.gitattributes`（可选）:
   - 配置 Git 属性

**验证点**:
- [ ] Git 仓库已初始化
- [ ] .gitignore 配置正确

---

## 七、阶段六：验证测试

### 7.1 任务清单

| 任务编号 | 任务名称 | 优先级 | 预计时间 |
|---------|---------|--------|---------|
| T6.1 | 编译验证 | P0 | 10分钟 |
| T6.2 | 功能验证 | P0 | 30分钟 |
| T6.3 | 代码质量验证 | P1 | 20分钟 |

### 7.2 详细执行步骤

#### T6.1 编译验证

**目标**: 验证项目可以正常编译

**步骤**:
1. 运行开发服务器：
   ```bash
   pnpm dev
   ```

2. 检查编译错误：
   - 无 TypeScript 错误
   - 无 ESLint 错误
   - 无构建错误

3. 运行生产构建：
   ```bash
   pnpm build
   ```

**验证点**:
- [ ] 开发服务器可以正常启动
- [ ] 无编译错误
- [ ] 生产构建成功

---

#### T6.2 功能验证

**目标**: 验证核心功能正常工作

**步骤**:
1. **验证路由**:
   - 路由跳转正常
   - 路由守卫正常
   - 404 页面正常

2. **验证状态管理**:
   - Store 可以正常使用
   - 状态更新正常

3. **验证 API 调用**:
   - 请求拦截器正常
   - 响应拦截器正常
   - 错误处理正常

4. **验证布局**:
   - 布局显示正常
   - 响应式布局正常

**验证点**:
- [ ] 所有核心功能正常
- [ ] 无功能缺陷

---

#### T6.3 代码质量验证

**目标**: 验证代码质量工具正常工作

**步骤**:
1. 运行 ESLint：
   ```bash
   pnpm lint
   ```

2. 运行 Prettier：
   ```bash
   pnpm format
   ```

3. 运行 Stylelint：
   ```bash
   pnpm stylelint
   ```

**验证点**:
- [ ] 代码检查通过
- [ ] 代码格式化正常
- [ ] 无代码质量问题

---

## 八、执行检查清单

### 8.1 项目初始化检查

- [ ] 项目已创建
- [ ] 所有依赖已安装
- [ ] 配置文件正确

### 8.2 项目结构检查

- [ ] 目录结构完整
- [ ] 核心文件已创建
- [ ] 类型定义完整

### 8.3 核心功能检查

- [ ] HTTP 请求封装完成
- [ ] 路由配置完成
- [ ] 状态管理完成
- [ ] 工具函数完成

### 8.4 布局组件检查

- [ ] 默认布局完成
- [ ] 布局子组件完成
- [ ] 样式正确

### 8.5 开发工具检查

- [ ] ESLint 配置完成
- [ ] Prettier 配置完成
- [ ] Stylelint 配置完成

### 8.6 验证测试检查

- [ ] 编译验证通过
- [ ] 功能验证通过
- [ ] 代码质量验证通过

---

## 九、常见问题与解决方案

### 9.1 依赖问题

**问题**: 依赖安装失败
- **解决方案**: 检查 Node.js 版本，清除缓存重新安装

**问题**: 依赖版本冲突
- **解决方案**: 检查 package.json，统一依赖版本

### 9.2 编译问题

**问题**: TypeScript 类型错误
- **解决方案**: 检查类型定义，确保类型正确

**问题**: 路径别名不生效
- **解决方案**: 检查 vite.config.ts 和 tsconfig.json 配置

### 9.3 功能问题

**问题**: 路由跳转不生效
- **解决方案**: 检查路由配置，检查路由守卫

**问题**: API 请求失败
- **解决方案**: 检查请求拦截器，检查后端接口

### 9.4 样式问题

**问题**: 样式不生效
- **解决方案**: 检查 scoped 属性，检查样式导入

---

## 十、后续工作建议

### 10.1 功能完善

1. **完善布局组件**:
   - 添加更多布局选项
   - 优化响应式设计

2. **完善工具函数**:
   - 添加更多工具函数
   - 优化现有工具函数

3. **完善组合式函数**:
   - 添加更多组合式函数
   - 优化现有组合式函数

### 10.2 开发体验

1. **添加 Mock 数据**:
   - 配置 Mock 服务
   - 添加 Mock 数据

2. **添加开发工具**:
   - 配置 Vue DevTools
   - 添加调试工具

### 10.3 性能优化

1. **路由懒加载**:
   - 配置路由懒加载
   - 优化代码分割

2. **组件懒加载**:
   - 大组件使用异步组件
   - 优化组件加载

---

## 十一、总结

本执行计划详细描述了 Lumina 前端项目基础架构的搭建过程，包括：

1. **项目初始化** - 创建项目、安装依赖、配置基础文件
2. **项目结构搭建** - 创建目录结构、核心文件、类型定义
3. **核心功能开发** - HTTP 请求、路由、状态管理、工具函数
4. **布局组件开发** - 默认布局、布局子组件
5. **开发工具配置** - ESLint、Prettier、Stylelint
6. **验证测试** - 编译验证、功能验证、代码质量验证

**关键成功因素**:
- 严格按照架构设计执行
- 每个阶段完成后进行验证
- 遇到问题及时记录和解决
- 保持代码质量和规范

**下一步**:
- 完成基础架构搭建后，可以开始业务页面开发
- 参考 `前端开发指南.md` 进行页面开发
- 参考 `前端架构设计.md` 了解架构细节

---

**文档版本**: v1.0  
**创建时间**: 2025-01-XX  
**最后更新**: 2025-01-XX

